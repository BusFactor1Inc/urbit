?>  ?=(@ .)
%.  .
=<  dec
=>  
  ::::
  ::::  Tier 0, kernel stub
  ::::
  ~%    %k.261
      ~
    ~
  &.
  ++  stub  261
  ++  nat   |=(a=* ?>(?=(@ a) a))
  ++  all   |=(a=* a)
  --
=>
  ::::
  ::::  Tier 1, atomic arithmetic
  ::::
  ~%    %a
      -
    ~
  &.
  ++  add
    ~.  %add
    |=  [a=@ b=@] 
    ^-  @
    ?:  .=(0 a)
      b
    $(a (dec a), b .+(b))
  ::
  ++  dec
    ~.  %dec
    |=  a=^~(*nat)
    ^-  *nat
    ~|  %dec
    ?<  .=(0 a)
    =+  b=^~(*nat)
    |-
    ?:  .=(a .+(b))
      b
    $(b .+(b))
  ::
  ++  div
    ~.  %div
    |=  [a=@ b=@]
    ^-  @
    ~|  %div
    ?<  .=(0 b)
    =+  c=@
    |-
    ?:  (lth a b)
      c
    $(a (sub a b), c .+(c))
  ::
  ++  gte
    ~.  %gte
    |=  [a=@ b=@]
    ^-  ?
    !(lth a b)
  ::
  ++  gth
    ~.  %gth
    |=  [a=@ b=@]
    ^-  ?
    !(lte a b)
  ::
  ++  lte
    ~.  %lte
    |=  [a=@ b=@]
    ?|(.=(a b) (lth a b))
  ::
  ++  lth
    ~.  %lth
    |=  [a=@ b=@]
    ^-  ?
    ?&
      !.=(a b)
      |-  ?:  .=(0 a)
            &
          ?:  .=(0 b)
            |
          $(a (dec a), b (dec b))
    ==
  ::
  ++  max
    ~.  %max
    |=  [a=@ b=@]
    ^-  @
    ?:  (gth a b)
      a
    b
  ::
  ++  min
    ~.  %min
    |=  [a=@ b=@]
    ^-  @
    ?:  (lth a b)
      a
    b
  ::
  ++  mod
    ~.  %mod
    |=  [a=@ b=@]
    ^-  @
    ?<  .=(0 b)
    (sub a (mul b (div a b)))
  ::
  ++  mul
    ~.  %mul
    |=  [a=@ b=@]
    ^-  @
    =+  c=^-(@ 0)
    |-
    ?:  .=(0 a)
      c
    $(a (dec a), c (add b c))
  ::
  ++  nop
    |*  a=*
    a
  ::
  ++  sub
    ~.  %sub
    |=  [a=@ b=@]
    ^-  @
    ?:  .=(0 b)
      a
    $(a (dec a), b (dec b))
  --
